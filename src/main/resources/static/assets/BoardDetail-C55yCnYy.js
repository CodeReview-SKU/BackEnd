import{_ as A,r as m,l as M,o as $,c,d as i,e,m as N,v as z,n as V,j as _,p as q,q as F,s as P,x as R,y as v,z as C,H as k,i as S,a as E,b as J,A as y,w as O,t as g,g as x,h as U,F as Y,f as G,k as K}from"./index-BNQoJ6cr.js";const Q={setup(){const s=m(""),t=m(""),o=m(),n=M(),r=async()=>{try{const a=await _.post("/api/comment/comments",{content:s.value,name:o.value,board_id:n.params.id},{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`}});console.log(a.data),u(),window.location.reload()}catch(a){console.error("댓글 제출 실패:",a)}},u=()=>{s.value="",t.value=""};return $(()=>{o.value=sessionStorage.getItem("name")}),{comment:s,author:t,handleSubmit:r}}},D=s=>(q("data-v-68be63ea"),s=s(),F(),s),W={class:"container-fluid mt-3 mb-3 p-3"},X={class:"mb-3"},Z=D(()=>e("label",{for:"comment",class:"form-label"},"댓글 작성하기",-1)),ee=D(()=>e("button",{type:"submit",class:"btn btn-primary"},"등록",-1));function te(s,t,o,n,r,u){return c(),i("div",W,[e("form",{onSubmit:t[1]||(t[1]=V((...a)=>n.handleSubmit&&n.handleSubmit(...a),["prevent"]))},[e("div",X,[Z,N(e("textarea",{class:"form-control",id:"comment",rows:"3","onUpdate:modelValue":t[0]||(t[0]=a=>n.comment=a),required:""},null,512),[[z,n.comment]])]),ee],32)])}const oe=A(Q,[["render",te],["__scopeId","data-v-68be63ea"]]);var B=P({props:{code:{type:String,required:!0},language:{type:String,default:""},autodetect:{type:Boolean,default:!0},ignoreIllegals:{type:Boolean,default:!0}},setup:function(s){var t=m(s.language);R(function(){return s.language},function(r){t.value=r});var o=v(function(){return s.autodetect||!t.value}),n=v(function(){return!o.value&&!k.getLanguage(t.value)});return{className:v(function(){return n.value?"":"hljs "+t.value}),highlightedCode:v(function(){var r;if(n.value)return console.warn('The language "'+t.value+'" you specified could not be found.'),s.code.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;");if(o.value){var u=k.highlightAuto(s.code);return t.value=(r=u.language)!==null&&r!==void 0?r:"",u.value}return(u=k.highlight(s.code,{language:t.value,ignoreIllegals:s.ignoreIllegals})).value})}},render:function(){return C("pre",{},[C("code",{class:this.className,innerHTML:this.highlightedCode})])}}),se={install:function(s){s.component("highlightjs",B)},component:B};const ne="/assets/like-active-C2uty8cC.png",ae="/assets/like-orwlBO01.png",le={key:0,style:{width:"10px"}},ce={key:1},re={__name:"LikeBtn",props:{data:{board:String,member:String}},setup(s){const t=s,o=m(!1),n=()=>{const a=sessionStorage.getItem("token");_.get(`/api/bookmark/get/${t.data.board}/${t.data.member}`,{headers:{Authorization:"Bearer "+a}}).then(l=>{console.log(t.data.board),console.log(t.data.member),console.log(l.data),o.value=l.data}).catch(l=>{console.log(l)})},r=()=>{const a=sessionStorage.getItem("token");_.post("/api/bookmark/create",{member:t.data.member,board:t.data.board},{headers:{Authorization:"Bearer "+a}}).then(l=>{console.log(l.data),o.value=!0}).catch(l=>{console.log(l)})},u=()=>{const a=sessionStorage.getItem("token");_.delete(`/api/bookmark/delete/${t.data.board}/${t.data.member}`,{headers:{Authorization:"Bearer "+a}}).then(l=>{console.log(l.data),o.value=!1}).catch(l=>{console.log(l)})};return $(()=>{n()}),(a,l)=>(c(),i("div",null,[o.value?(c(),i("div",le,[e("img",{class:"small-img",src:ne,onClick:u,alt:"img",style:{width:"30px"}})])):o.value?S("",!0):(c(),i("div",ce,[e("img",{src:ae,onClick:r,alt:"img",style:{width:"30px"}})]))]))}},ie={class:"container mb-3"},de={class:"container mt-4"},ue={key:0},me={class:"d-flex justify-content-start"},he={class:"mb-4 text-dark-emphasis me-3"},ge={key:0,class:"me-5"},_e={class:"d-flex justify-content-between"},pe={class:"text-muted mb-0 ms-2"},ve={class:"text-dark-emphasis"},be=e("hr",null,null,-1),fe=["innerHTML"],ke=e("hr",null,null,-1),ye=e("h4",null,"소스코드",-1),xe={key:0,class:"container mb-4 mt-4"},Se={key:1,class:"container text-muted mb-4"},$e=e("h6",null,"소스코드가 없습니다.",-1),Ie=[$e],we={key:1},Le=e("p",null,"게시물을 찾을 수 없습니다.",-1),Ce=[Le],Be=e("hr",null,null,-1),Me={class:"comment-list mt-4"},De=e("hr",null,null,-1),He=e("h2",{class:"mb-3"},"댓글",-1),Te={key:0},je={class:"list-group"},Ae={class:"text-muted m-2"},Ne=["innerHTML"],ze={key:1},Ve=e("h4",{class:"text-center text-muted"},"댓글이 없습니다.",-1),qe=[Ve],Pe={__name:"BoardDetail",setup(s){const t=M();m(!1);const o=m(),n=m([]),r=E(),u=m(""),a=()=>{_.get(`/api/board/detail/${t.params.id}`).then(d=>{o.value=d.data,console.log(o.value)}).catch(d=>{console.log(d)})},l=()=>{_.get(`/api/comment/board/${t.params.id}`).then(d=>{n.value=d.data,console.log(n.value)}).catch(d=>{console.log(d)})};function I(d){const h=new Date(d),b=h.getFullYear().toString().slice(-4),p=("0"+(h.getMonth()+1)).slice(-2),f=("0"+h.getDate()).slice(-2),L=("0"+h.getHours()).slice(-2),T=("0"+h.getMinutes()).slice(-2),j=L/12?"오후":"오전";return`${b}년 ${p}월 ${f}일 ${j} ${L%12}시 ${T}분`}const H=se.component;$(async()=>{a(),l(),r.isLoggedIn=!!sessionStorage.getItem("isLoggedIn"),u.value=sessionStorage.getItem("name")});function w(d){return d.replace(/\n/g,"<br>")}return(d,h)=>{const b=J("router-link");return c(),i("div",ie,[e("div",de,[y(b,{to:"/",class:"btn btn-primary mb-4"},{default:O(()=>[K("목록으로 돌아가기")]),_:1}),o.value?(c(),i("div",ue,[e("div",me,[e("h1",he,g(o.value.title),1),x(r).isLoggedIn?(c(),i("div",ge,[y(re,{data:{board:o.value.id,member:u.value}},null,8,["data"])])):S("",!0),e("div",null,[e("h4",null," 좋아요 : "+g(o.value.likeCount),1)])]),e("div",_e,[e("h5",pe,g(I(o.value.write_date)),1),e("h5",ve,"작성자 : "+g(o.value.name),1)]),be,e("p",{class:"container mb-5",innerHTML:w(o.value.content)},null,8,fe),ke,ye,o.value.source_code?(c(),i("div",xe,[y(x(H),{class:"rounded-3",code:o.value.source_code,autodetect:!0},null,8,["code"])])):(c(),i("div",Se,Ie))])):(c(),i("div",we,Ce))]),Be,x(r).isLoggedIn?(c(),U(oe,{key:0})):S("",!0),e("div",Me,[De,He,n.value?(c(),i("div",Te,[e("ul",je,[(c(!0),i(Y,null,G(n.value,(p,f)=>(c(),i("li",{key:f,class:"list-group-item"},[e("strong",null,g(p.member.name),1),e("small",Ae,g(I(p.createDate)),1),e("p",{class:"m-3",innerHTML:w(p.content)},null,8,Ne)]))),128))])])):(c(),i("div",ze,qe))])])}}};export{Pe as default};
